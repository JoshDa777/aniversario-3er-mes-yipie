<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Tres Meses: Nuestro Puente de Luz üåå</title>

    <style>
        /* ESTILOS CSS */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: #0d1117; /* Fondo oscuro espacial */
            color: #c9d1d9;
            text-align: center;
            overflow: hidden; 
        }
        h1 {
            color: #58a6ff; 
            padding-top: 20px;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(88, 166, 255, 0.5); 
        }
        .container {
            width: 95%;
            margin: 0 auto;
        }
        model-viewer {
            width: 100%;
            height: 80vh; 
            margin: 10px 0;
            --poster-color: #0d1117; 
        }
        /* Estilo de los Hotspots (los mensajes) */
        .hotspot-box {
            background: rgba(127, 255, 212, 0.9); /* Aqua/Verde-Aurora brillante */
            color: #0d1117;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(127, 255, 212, 0.7);
            border: 2px solid white;
            
            /* Propiedades para la animaci√≥n */
            display: block; 
            opacity: 0; 
            visibility: hidden; 
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            pointer-events: none; 
            transform: translate(20px, -20px); 
        }
        /* Clase para hacer visible el hotspot al hacer zoom */
        .visible {
            opacity: 1 !important;
            visibility: visible !important;
        }
        p.message {
            margin-top: 10px;
            font-size: 1.1em;
            color: #ffffff;
        }
    </style>

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>üåå Tres Meses de Amor Iluminando la Distancia üåç</h1>
        <p class="message">¬°Gira la Tierra y ac√©rcate al m√°gico puente de luz que conecta a Cali y Santa Cruz! **(¬°El zoom revela la magia!)**</p>

        <model-viewer 
            id="earth-model"
            src="tierra-noche.glb"  alt="Modelo 3D de la Tierra de Noche"
            shadow-intensity="1"
            camera-controls
            auto-rotate 
            rotation-per-second="10deg"
            ar>

            <div slot="hotspot-cali" class="hotspot-box" data-message="üá®üá¥ CALI: El lugar donde todo comenz√≥. ¬°T√∫ y yo, hace tres meses!">
                Cali
            </div>

            <div slot="hotspot-santacruz" class="hotspot-box" data-message="üáßüá¥ SANTA CRUZ: Mi coraz√≥n viaja hasta ti todos los d√≠as. ¬°Feliz Tercer Mes!">
                Santa Cruz
            </div>

            <div slot="hotspot-center" class="hotspot-box" data-message="‚ú® Nuestra Aurora Boreal: Este puente de luz representa cada uno de nuestros 92 d√≠as. Te amo.">
                Puente de Luz
            </div>
            
            <div slot="hotspot-luz1" class="hotspot-box" data-message="‚≠ê Cada d√≠a te extra√±o m√°s, lo prometo.">
                *
            </div>
            <div slot="hotspot-luz2" class="hotspot-box" data-message="‚≠ê ¬øLista para el pr√≥ximo trimestre?">
                *
            </div>
            
        </model-viewer>
    </div>

    <script>
        const modelViewer = document.getElementById('earth-model');
        const zoomThreshold = 3.5; // Distancia de la c√°mara para activar los mensajes

        // Funci√≥n que revisa si la c√°mara est√° cerca del modelo
        function updateHotspotVisibility() {
            const cameraOrbit = modelViewer.getCameraOrbit();
            if (!cameraOrbit) return;

            const match = cameraOrbit.match(/(\d+\.?\d*)\s*m/); 
            if (!match) return;

            const cameraDistance = parseFloat(match[1]);
            const hotspots = modelViewer.querySelectorAll('.hotspot-box');

            if (cameraDistance < zoomThreshold) {
                // Si la c√°mara est√° cerca (hizo zoom), muestra los mensajes completos
                hotspots.forEach(hotspot => {
                    hotspot.classList.add('visible');
                    hotspot.textContent = hotspot.getAttribute('data-message'); // Muestra el mensaje largo
                });
            } else {
                // Si la c√°mara est√° lejos, oculta y restaura el texto corto
                hotspots.forEach(hotspot => {
                    hotspot.classList.remove('visible');
                    // Restaura el texto corto inicial 
                    if (hotspot.slot === 'hotspot-cali') {
                        hotspot.textContent = 'Cali';
                    } else if (hotspot.slot === 'hotspot-santacruz') {
                        hotspot.textContent = 'Santa Cruz';
                    } else if (hotspot.slot === 'hotspot-center') {
                         hotspot.textContent = 'Puente de Luz';
                    } else {
                         hotspot.textContent = '*'; // Para los puntos de luz intermedios
                    }
                });
            }
        }

        // Ejecuci√≥n principal
        modelViewer.addEventListener('load', () => {
            
            // --- ¬°PUNTOS CR√çTICOS PARA MODIFICAR! ---
            // Los 5 puntos a continuaci√≥n deben ser ajustados (X, Y, Z)
            // hasta que formen la l√≠nea que conecta Cali y Santa Cruz.
            
            modelViewer.updateHotspot({
                slot: 'hotspot-cali', 
                position: '10.04m 10.99m -10.06m' // MODIFICA ESTOS N√öMEROS
            });
            modelViewer.updateHotspot({
                slot: 'hotspot-santacruz', 
                position: '10.04m 10.95m 10.29m' // MODIFICA ESTOS N√öMEROS
            });
            modelViewer.updateHotspot({
                slot: 'hotspot-center', 
                position: '10.04m 10.97m 10.11m' // MODIFICA ESTOS N√öMEROS
            });
            modelViewer.updateHotspot({
                slot: 'hotspot-luz1', 
                position: '10.04m 10.98m 10.04m' // MODIFICA ESTOS N√öMEROS
            });
            modelViewer.updateHotspot({
                slot: 'hotspot-luz2', 
                position: '10.04m 10.96m 10.20m' // MODIFICA ESTOS N√öMEROS
            });

            // Llama a la funci√≥n de visibilidad cada vez que la c√°mara cambia (zoom o rotaci√≥n)
            modelViewer.addEventListener('camera-change', updateHotspotVisibility);
        });

    </script>
</body>
</html>
