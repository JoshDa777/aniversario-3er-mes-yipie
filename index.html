<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Tres Meses: Nuestro Puente de Luz üåå</title>

    <style>
        /* ESTILOS CSS */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: #0d1117; /* Fondo oscuro espacial */
            color: #c9d1d9;
            text-align: center;
            overflow: hidden; /* Evita barras de desplazamiento innecesarias */
        }
        h1 {
            color: #58a6ff; /* Azul brillante para el t√≠tulo */
            padding-top: 20px;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(88, 166, 255, 0.5); /* Efecto ne√≥n */
        }
        .container {
            width: 95%;
            margin: 0 auto;
        }
        /* El contenedor principal del modelo 3D */
        model-viewer {
            width: 100%;
            height: 80vh; /* Ocupa gran parte de la altura para el enfoque */
            margin: 10px 0;
            --poster-color: #0d1117; 
        }
        /* Estilo de los Hotspots (los mensajes) */
        .hotspot-box {
            background: rgba(127, 255, 212, 0.9); /* Aqua/Verde-Aurora brillante */
            color: #0d1117;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(127, 255, 212, 0.7);
            border: 2px solid white;
            
            /* Propiedades para la animaci√≥n */
            display: block; 
            opacity: 0; /* Inicialmente transparente */
            visibility: hidden; /* Inicialmente no visible */
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
            pointer-events: none; /* No interfiere con la rotaci√≥n */
            transform: translate(20px, -20px); 
        }
        /* Clase para hacer visible el hotspot al hacer zoom */
        .visible {
            opacity: 1 !important;
            visibility: visible !important;
        }
        p.message {
            margin-top: 10px;
            font-size: 1.1em;
            color: #ffffff;
        }
    </style>

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>üåå Tres Meses de Amor Iluminando la Distancia üåç</h1>
        <p class="message">¬°Gira la Tierra y ac√©rcate al m√°gico puente de luz que conecta a Cali y Santa Cruz! (¬°El zoom revela la magia!)</p>

        <model-viewer 
            id="earth-model"
            src="tierra-noche.glb" 
            alt="Modelo 3D de la Tierra de Noche"
            shadow-intensity="1"
            camera-controls
            auto-rotate 
            rotation-per-second="10deg"
            ar>

            <div slot="hotspot-cali" class="hotspot-box" data-message="üá®üá¥ CALI: El lugar donde todo comenz√≥. ¬°T√∫ y yo, hace tres meses!">
                Cali
            </div>

            <div slot="hotspot-santacruz" class="hotspot-box" data-message="üáßüá¥ SANTA CRUZ: Mi coraz√≥n viaja hasta ti todos los d√≠as. ¬°Feliz Tercer Mes!">
                Santa Cruz
            </div>

            <div slot="hotspot-center" class="hotspot-box" data-message="‚ú® Nuestra Aurora Boreal: Este puente de luz representa cada uno de nuestros 92 d√≠as. Te amo.">
                Puente de Luz
            </div>
            
        </model-viewer>
    </div>

    <script>
        const modelViewer = document.getElementById('earth-model');
        const zoomThreshold = 3.5; // Distancia de la c√°mara para activar los mensajes

        // Funci√≥n que revisa si la c√°mara est√° cerca del modelo
        function updateHotspotVisibility() {
            // Extrae la distancia de la c√°mara del string de orbit (ej: "0deg 90deg 3.8m")
            const cameraOrbit = modelViewer.getCameraOrbit();
            if (!cameraOrbit) return;

            // La expresi√≥n regular encuentra el n√∫mero de distancia (al final del string)
            const match = cameraOrbit.match(/(\d+\.?\d*)\s*m/); 
            if (!match) return;

            const cameraDistance = parseFloat(match[1]);
            const hotspots = modelViewer.querySelectorAll('.hotspot-box');

            if (cameraDistance < zoomThreshold) {
                // Si la c√°mara est√° cerca (hizo zoom), muestra los mensajes completos
                hotspots.forEach(hotspot => {
                    hotspot.classList.add('visible');
                    hotspot.textContent = hotspot.getAttribute('data-message'); // Muestra el mensaje largo
                });
            } else {
                // Si la c√°mara est√° lejos, oculta y muestra el texto corto
                hotspots.forEach(hotspot => {
                    hotspot.classList.remove('visible');
                    // Restaura el texto corto inicial (ej: "Cali", "Santa Cruz")
                    hotspot.textContent = hotspot.slot.replace('hotspot-', '').toUpperCase();
                });
            }
        }

        // Ejecuci√≥n principal
        modelViewer.addEventListener('load', () => {
            // --- Paso CR√çTICO: Configuraci√≥n de las coordenadas geogr√°ficas ---
            
            // **IMPORTANTE: Estos valores son de ejemplo.**
            // Debes AFINAR X, Y, Z mirando el modelo cargado en tu navegador
            // hasta que los puntos caigan sobre Cali (Colombia) y Santa Cruz (Bolivia).
            
            modelViewer.updateHotspot({
                slot: 'hotspot-cali', 
                position: '-0.38m 0.8m 0.42m' // Latitud y longitud de Cali
            });
            modelViewer.updateHotspot({
                slot: 'hotspot-santacruz', 
                position: '-0.2m 0.85m 0.49m' // Latitud y longitud de Santa Cruz
            });
             modelViewer.updateHotspot({
                slot: 'hotspot-center', 
                position: '-0.3m 0.82m 0.45m' // Punto intermedio del "Puente"
            });

            // Llama a la funci√≥n de visibilidad cada vez que la c√°mara cambia (zoom o rotaci√≥n)
            modelViewer.addEventListener('camera-change', updateHotspotVisibility);
        });

    </script>
</body>
</html>
